import{g as e,i as t,l as a,m as l,t as o,p as n,c as s,r as i,H as r,b as c,a as u}from"./page-wraper.87c317ef.js";import{d,r as p,q as f,v as x,h as w,j as v,o as b,c as y,w as _,x as h,a as m,y as g,u as k,e as $,F as C,f as j,b as S,t as z,p as D,n as I,a5 as T,i as A,J as F,a6 as H}from"./index-3ce4de40.js";import{_ as P}from"./demo-block.0ea55f3c.js";const q=c(d({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,text:{type:[String,Array],default:""},type:t("warning"),scrollable:a(!0),delay:l(1),speed:l(50),closable:a(!1),wrapable:a(!1),prefix:String,color:String,backgroundColor:String,direction:t("horizontal")},emits:["close","next","click"],setup(e,{emit:t}){const a=e,l=".wd-notice-bar__wrap",c=".wd-notice-bar__content",u=p(0),d=p(!0),H=p(""),P=p(0),q=f((()=>Array.isArray(a.text)?a.text:[a.text])),G=f((()=>q.value[P.value])),J=p(0),M=f((()=>"horizontal"===a.direction)),N=f((()=>"vertical"===a.direction)),V=f((()=>{const e={};return o(a.color)&&(e.color=a.color),o(a.backgroundColor)&&(e.background=a.backgroundColor),`${n(e)};${a.customStyle}`})),X=f((()=>{const{type:e,wrapable:t,scrollable:l}=a;let o=[];return e&&o.push(`is-${e}`),M.value?!t&&!l&&o.push("wd-notice-bar--ellipse"):o.push("wd-notice-bar--ellipse"),t&&!l&&o.push("wd-notice-bar--wrap"),o.join(" ")})),{proxy:Y}=F();function B(){d.value=!1,t("close")}function E({duration:e,delay:t,translate:l}){const o={transitionProperty:"all",transitionDelay:`${t}s`,transitionDuration:`${e}s`,transform:`${"vertical"===a.direction?"translateY":"translateX"}(${l}px)`,transitionTimingFunction:"linear"};return n(o)}function K(){return Promise.all([r(l,!1,Y),r(c,!1,Y)])}async function L(e){const t=-e/(q.value.length+1)*(P.value+1);H.value=E({duration:e/(q.value.length+1)/a.speed,delay:a.delay,translate:t})}function O(){M.value?H.value=E({duration:0,delay:0,translate:u.value+1}):++J.value>=q.value.length&&(J.value=0,H.value=E({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{P.value>=q.value.length-1?P.value=0:P.value++,t("next",P.value),T((async()=>{const[e,t]=await K();t.width&&t.height&&(M.value?H.value=E({duration:(u.value+t.width)/a.speed,delay:a.delay,translate:-t.width}):L(t.height))})),clearTimeout(e)}),20)}function Q(){const e=i(a.text)?{index:P.value,text:a.text[P.value]}:{index:0,text:a.text};t("click",e)}return x([()=>a.text],(()=>{T((()=>async function(){const[e,t]=await K();if(!e.width||!t.width||!t.height)return;u.value=e.width,M.value?a.scrollable&&(H.value=E({duration:t.width/a.speed,delay:a.delay,translate:-t.width})):q.value.length>1&&L(t.height)}()))}),{deep:!0,immediate:!0}),(e,t)=>{const a=w(v("wd-icon"),s),l=A;return d.value?(b(),y(l,{key:0,class:I(`wd-notice-bar ${e.customClass} ${k(X)}`),style:g(k(V))},{default:_((()=>[e.prefix?(b(),y(a,{key:0,"custom-class":"wd-notice-bar__prefix",size:"18px",name:e.prefix},null,8,["name"])):h(e.$slots,"prefix",{key:1},void 0,!0),m(l,{class:"wd-notice-bar__wrap"},{default:_((()=>[m(l,{class:"wd-notice-bar__content",style:g(H.value),onTransitionend:O,onClick:Q},{default:_((()=>[k(N)?(b(),$(C,{key:0},[(b(!0),$(C,null,j(k(q),(e=>(b(),y(l,{key:e},{default:_((()=>[S(z(e),1)])),_:2},1024)))),128)),k(q).length>1?(b(),y(l,{key:0},{default:_((()=>[S(z(k(q)[0]),1)])),_:1})):D("",!0)],64)):h(e.$slots,"default",{key:1},(()=>[S(z(k(G)),1)]),!0)])),_:3},8,["style"])])),_:3}),e.closable?(b(),y(a,{key:2,"custom-class":"wd-notice-bar__suffix",size:"18px",name:"close-bold",onClick:B})):h(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):D("",!0)}}}),[["__scopeId","data-v-1f083c5b"]]),G=c(d({__name:"Index",setup(e){const t=p(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),a=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+t.value[e])};function l(e){console.log(e)}return(e,o)=>{const n=w(v("wd-notice-bar"),q),i=w(v("demo-block"),P),r=w(v("wd-icon"),s),c=A,d=w(v("page-wraper"),u);return b(),y(d,null,{default:_((()=>[m(c,null,{default:_((()=>[m(i,{title:"基本用法"},{default:_((()=>[m(n,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),m(i,{title:"类型修改"},{default:_((()=>[m(n,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),m(n,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),m(i,{title:"禁止滚动"},{default:_((()=>[m(n,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),m(i,{title:"插槽"},{default:_((()=>[m(n,{scrollable:!1},{prefix:_((()=>[m(r,{"custom-class":"prefix",name:"warn-bold"},{default:_((()=>[S("占位符")])),_:1})])),suffix:_((()=>[H("div",{style:{color:"#4d80f0"}},"查看")])),default:_((()=>[S(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),m(i,{title:"可关闭的"},{default:_((()=>[m(n,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),m(i,{title:"多行展示"},{default:_((()=>[m(n,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),m(i,{title:"自定义颜色"},{default:_((()=>[m(n,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),m(i,{title:"多文本轮播"},{default:_((()=>[m(n,{onClick:l,text:t.value,prefix:"check-outline",onNext:a},null,8,["text"])])),_:1}),m(i,{title:"垂直滚动"},{default:_((()=>[m(n,{onClick:l,prefix:"warn-bold",direction:"vertical",text:t.value,delay:3,"custom-class":"space"},null,8,["text"]),m(n,{onClick:l,prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",delay:3,"custom-class":"space"})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-4f53a230"]]);export{G as default};
