import{g as e,i as l,m as a,l as s,w as o,K as n,M as t,h as i,p as r,c as u,N as c,z as d,b as p}from"./page-wraper.87c317ef.js";import{d as f,r as m,v as h,q as y,Q as v,h as g,j as _,o as b,c as w,w as x,n as k,u as S,y as I,x as $,p as C,a as P,e as V,F as j,b as L,t as W,i as q,W as B,g as z}from"./index-3ce4de40.js";import{u as E}from"./useTranslate.26b7af52.js";const K=p(f({name:"wd-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customInputClass:l(""),customLabelClass:l(""),placeholder:String,placeholderStyle:String,placeholderClass:l(""),cursorSpacing:a(0),cursor:a(-1),selectionStart:a(-1),selectionEnd:a(-1),adjustPosition:s(!0),holdKeyboard:s(!1),confirmType:l("done"),confirmHold:s(!1),focus:s(!1),type:l("text"),maxlength:{type:Number,default:-1},disabled:s(!1),alwaysEmbed:s(!1),alignRight:s(!1),modelValue:o(""),showPassword:s(!1),clearable:s(!1),readonly:s(!1),useSuffixSlot:s(!1),usePrefixSlot:s(!1),prefixIcon:String,suffixIcon:String,showWordLimit:s(!1),label:String,labelWidth:l("33%"),useLabelSlot:s(!1),size:String,error:s(!1),center:s(!1),noBorder:s(!1),required:s(!1),prop:String,rules:n()},emits:["update:modelValue","clear","change","blur","focus","input","keyboardheightchange","confirm","linechange","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,{translate:s}=E("input"),o=m(!1),n=m(!1),p=m(!1),f=m(!1),K=m(!1),M=m(""),H=t();h((()=>a.focus),(e=>{K.value=e}),{immediate:!0,deep:!0}),h((()=>a.modelValue),(e=>{const{disabled:l,readonly:s,clearable:n}=a;void 0===e&&(e="",console.warn("[wot-design] warning(wd-input): value can not be undefined.")),M.value=e,o.value=Boolean(n&&!l&&!s&&e)}),{immediate:!0,deep:!0});const{parent:T}=i(c),A=y((()=>T&&a.prop&&T.errorMessages&&T.errorMessages[a.prop]?T.errorMessages[a.prop]:"")),F=y((()=>{let e=!1;if(T&&T.props.rules){const l=T.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some((e=>e.required)))}return a.required||a.rules.some((e=>e.required))||e})),N=y((()=>`wd-input  ${a.label||a.useLabelSlot?"is-cell":""} ${a.center?"is-center":""} ${H.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${M.value&&String(M.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`)),O=y((()=>`wd-input__label ${a.customLabelClass} ${F.value?"is-required":""}`)),R=y((()=>`wd-input__placeholder  ${a.placeholderClass}`)),G=y((()=>a.labelWidth?r({"min-width":a.labelWidth,"max-width":a.labelWidth}):""));function Q(){p.value=!p.value}function U(){M.value="",d().then((()=>d())).then((()=>d())).then((()=>{K.value=!0,l("change",{value:""}),l("update:modelValue",M.value),l("clear")}))}function D(){K.value=!1,l("change",{value:M.value}),l("update:modelValue",M.value),l("blur",{value:M.value})}function J({detail:e}){f.value?f.value=!1:(K.value=!0,l("focus",e))}function X({detail:e}){l("update:modelValue",M.value),l("input",e)}function Y({detail:e}){l("keyboardheightchange",e)}function Z({detail:e}){l("confirm",e)}function ee(){l("clicksuffixicon")}function le(){l("clickprefixicon")}function ae(e){l("click",e)}return v((()=>{!function(){const{disabled:e,readonly:s,clearable:t,maxlength:i,showWordLimit:r}=a;let u="";r&&i&&M.value.toString().length>i&&(u=M.value.toString().substring(0,i));o.value=Boolean(!e&&!s&&t&&M.value),n.value=Boolean(!e&&!s&&i&&r),M.value=u||M.value,l("update:modelValue",M.value)}()})),(e,l)=>{const a=g(_("wd-icon"),u),t=q,i=B,r=z;return b(),w(t,{class:k(S(N)),style:I(e.customStyle),onClick:ae},{default:x((()=>[e.label||e.useLabelSlot?(b(),w(t,{key:0,class:k(S(O)),style:I(S(G))},{default:x((()=>[e.prefixIcon||e.usePrefixSlot?(b(),w(t,{key:0,class:"wd-input__prefix"},{default:x((()=>[e.prefixIcon&&!e.usePrefixSlot?(b(),w(a,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:le},null,8,["name"])):$(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):C("",!0),P(t,{class:"wd-input__label-inner"},{default:x((()=>[e.label?(b(),V(j,{key:0},[L(W(e.label),1)],64)):$(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):C("",!0),P(t,{class:"wd-input__body"},{default:x((()=>[P(t,{class:"wd-input__value"},{default:x((()=>[!e.prefixIcon&&!e.usePrefixSlot||e.label?C("",!0):(b(),w(t,{key:0,class:"wd-input__prefix"},{default:x((()=>[e.prefixIcon?(b(),w(a,{key:0,"custom-class":"wd-input__icon",name:e.prefixIcon,onClick:le},null,8,["name"])):C("",!0),$(e.$slots,"prefix",{},void 0,!0)])),_:3})),P(i,{class:k(["wd-input__inner",e.prefixIcon?"wd-input__inner--prefix":"",n.value?"wd-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!p.value,modelValue:M.value,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value=e),placeholder:e.placeholder||S(s)("placeholder"),disabled:e.disabled,maxlength:e.maxlength,focus:K.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":S(R),onInput:X,onFocus:J,onBlur:D,onConfirm:Z,onKeyboardheightchange:Y},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class"]),e.readonly?(b(),w(t,{key:1,class:"wd-input__readonly-mask"})):C("",!0),o.value||e.showPassword||e.suffixIcon||n.value||e.useSuffixSlot?(b(),w(t,{key:2,class:"wd-input__suffix"},{default:x((()=>[o.value?(b(),w(a,{key:0,"custom-class":"wd-input__clear",name:"error-fill",onClick:U})):C("",!0),e.showPassword?(b(),w(a,{key:1,"custom-class":"wd-input__icon",name:p.value?"view":"eye-close",onClick:Q},null,8,["name"])):C("",!0),n.value?(b(),w(t,{key:2,class:"wd-input__count"},{default:x((()=>[P(r,{class:k([M.value&&String(M.value).length>0?"wd-input__count-current":"",String(M.value).length>e.maxlength?"is-error":""])},{default:x((()=>[L(W(String(M.value).length),1)])),_:1},8,["class"]),L(" /"+W(e.maxlength),1)])),_:1})):C("",!0),e.suffixIcon?(b(),w(a,{key:3,"custom-class":"wd-input__icon",name:e.suffixIcon,onClick:ee},null,8,["name"])):C("",!0),$(e.$slots,"suffix",{},void 0,!0)])),_:3})):C("",!0)])),_:3}),S(A)?(b(),w(t,{key:0,class:"wd-input__error-message"},{default:x((()=>[L(W(S(A)),1)])),_:1})):C("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-65d77a36"]]);export{K as _};
