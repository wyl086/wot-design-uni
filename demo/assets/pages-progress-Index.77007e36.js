import{d as e,r as t,q as r,v as a,h as s,j as o,o as l,c as n,w as c,a as u,n as p,y as i,u as d,b as g,t as m,p as f,i as b}from"./index-3ce4de40.js";import{g as _,m as h,l as v,p as w,c as y,q as k,r as x,b as j,a as N}from"./page-wraper.87c317ef.js";import{_ as T}from"./demo-block.0ea55f3c.js";const I=j(e({name:"wd-progress",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{..._,percentage:h(0),hideText:v(!1),color:{type:[String,Array,Object],default:"linear-gradient(315deg, rgba(81,124,240,1) 0%,rgba(118,158,245,1) 100%)"},duration:h(30),status:String},setup(e){const _=e,h=t(""),v=t(0),j=t(0),N=t("");let T=null;const I=r((()=>{const e={background:h.value,width:v.value+"%","transition-duration":j.value*_.duration*.001+"s"};return w(e)}));function O(e,t){if(T)return;const{duration:r}=_;j.value=Math.abs(e-v.value),setTimeout((()=>{v.value=e,h.value=t,T=setTimeout((()=>{clearTimeout(T),T=null,S()}),j.value*r)}),50)}function S(){const{percentage:e,color:t}=_;if(v.value===e||!e)return;let r=x(t)?t:[t];if(0===r.length)throw Error("The colorArray is empty");const a=r.every((e=>"string"==typeof e)),s=r.every((e=>e.hasOwnProperty("color")&&e.hasOwnProperty("percentage")));if(!a&&!s)throw Error("Color must be String or Object with color and percentage");if(s&&r.some((({percentage:e})=>Number.isNaN(parseInt(e)))))throw Error("All the percentage must can be formatted to Number");const o=parseInt(""+100/r.length),l=s?r.sort(((e,t)=>e.percentage-t.percentage)):r.map(((e,t)=>({color:e,percentage:(t+1)*o})));v.value>e?l.some((t=>{if(e<=t.percentage)return O(e,t.color),!0})):l.some(((t,r)=>{if(v.value<t.percentage&&t.percentage<=e)return O(t.percentage,t.color),!0;r===l.length-1&&O(e,t.color)}))}return a((()=>_.percentage),(e=>{(Number.isNaN(e)||e<0||e>100)&&console.error("The value of percentage must be between 0 and 100"),S()})),a((()=>_.color),(()=>{S()}),{deep:!0,immediate:!0}),a((()=>_.status),(()=>{!function(){const{status:e}=_;let t=[];e&&t.push(`is-${e}`),N.value=t.join(" ")}()}),{deep:!0,immediate:!0}),a((()=>_.duration),(e=>{k(e)}),{deep:!0,immediate:!0}),(e,t)=>{const r=b,a=s(o("wd-icon"),y);return l(),n(r,{class:p(`wd-progress ${e.customClass}`),style:i(e.customStyle)},{default:c((()=>[u(r,{class:"wd-progress__outer"},{default:c((()=>[u(r,{class:p(`wd-progress__inner ${N.value}`),style:i(d(I))},null,8,["class","style"])])),_:1}),e.hideText?e.status?(l(),n(a,{key:1,"custom-class":`wd-progress__label wd-progress__icon ${N.value}`,name:"danger"==e.status?"close-outline":"check-outline",color:"string"==typeof e.color?e.color:""},null,8,["custom-class","name","color"])):f("",!0):(l(),n(r,{key:0,class:"wd-progress__label"},{default:c((()=>[g(m(e.percentage)+"%",1)])),_:1}))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-86a9f88b"]]),O=e({__name:"Index",setup(e){const r=t([{color:"yellow",percentage:30},{color:"red",percentage:60},{color:"blue",percentage:80},{color:"black",percentage:90}]),a=t(100);return(e,t)=>{const p=s(o("wd-progress"),I),i=s(o("demo-block"),T),d=s(o("page-wraper"),N);return l(),n(d,null,{default:c((()=>[u(i,{title:"基本用法"},{default:c((()=>[u(p,{percentage:30})])),_:1}),u(i,{title:"不显示进度文字"},{default:c((()=>[u(p,{percentage:60,"hide-text":""})])),_:1}),u(i,{title:"进度条状态"},{default:c((()=>[u(p,{percentage:100,"hide-text":"",status:"success"}),u(p,{percentage:80,"hide-text":"",status:"danger"})])),_:1}),u(i,{title:"修改颜色"},{default:c((()=>[u(p,{percentage:80,color:"#00c740"})])),_:1}),u(i,{title:"颜色数组"},{default:c((()=>[u(p,{percentage:100,color:["#00c740","#ffb300","#e2231a","#0083ff"]}),u(p,{percentage:a.value,color:r.value},null,8,["percentage","color"])])),_:1})])),_:1})}}});export{O as default};
