import{d as e,v as a,r as t,ai as l,E as s,q as i,m as o,o as u,c as n,w as d,y as r,p as c,n as m,u as g,a5 as f,G as p,i as v,e as _,a as h,b as y,F as w,h as b,j as z}from"./index-3ce4de40.js";import{g as x,i as $,m as k,l as I,w as V,G as j,v as C,p as S,a6 as X,a7 as F,b as P,_ as W,a as Y}from"./page-wraper.87c317ef.js";import{_ as A}from"./wd-button.93e2fc0b.js";import{_ as D}from"./demo-block.0ea55f3c.js";import{_ as G}from"./wd-badge.ed313623.js";import{_ as H}from"./wd-cell-group.f1b83f17.js";import"./useChildren.4f3696ad.js";const O=P(e({name:"wd-watermark",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...x,content:$(""),image:$(""),imageHeight:k(100),imageWidth:k(100),gutterX:k(0),gutterY:k(0),width:k(100),height:k(100),fullScreen:I(!0),color:$("#8c8c8c"),size:k(14),fontStyle:$("normal"),fontWeight:V("normal"),fontFamily:$("PingFang SC"),rotate:k(-25),zIndex:k(1100),opacity:k(.5)},setup(e){const _=e;a((()=>_),(()=>{$.value=!0,z.value=(_.height+_.gutterY)*b.value,x.value=(_.width+_.gutterX)*b.value,f((()=>{V()}))}),{deep:!0});const h=t(`water${j()}`),y=t(""),w=t(l("createOffscreenCanvas")&&Boolean(uni.createOffscreenCanvas)),b=t(s().pixelRatio),z=t((_.height+_.gutterY)*b.value),x=t((_.width+_.gutterX)*b.value),$=t(!0),k=i((()=>{let e="wd-watermark";return _.fullScreen&&(e=`${e} is-fullscreen`),`${e} ${_.customClass}`})),I=i((()=>{const e={opacity:_.opacity,backgroundSize:C(_.width+_.gutterX)};return y.value&&(e.backgroundImage=`url('${y.value}')`),`${S(e)};${_.customStyle}`}));function V(){$.value=!1;const{width:e,height:a,color:t,size:l,fontStyle:s,fontWeight:i,fontFamily:o,content:u,rotate:n,gutterX:d,gutterY:r,image:c,imageHeight:m,imageWidth:g}=_;!function(e,a,t,l,s,i,o,u,n,d,r,c,m,g){const f=(a+r)*b.value,p=(e+d)*b.value,v=e*b.value,_=a*b.value,h=l*b.value;!function(e,a,t,l,s,i,o,u,n,d,r,c,m,g){const f=document.createElement("canvas"),p=f.getContext("2d");if(f.setAttribute("width",`${a}px`),f.setAttribute("height",`${e}px`),p)if(c){!async function(e,a,t,l,s,i,o,u,n){e.translate(o/2,u/2),e.rotate(Math.PI/180*Number(i)),a.crossOrigin="anonymous",a.referrerPolicy="no-referrer",X(t)?a.src=t:a.src=F(t,{timestamp:`${(new Date).getTime()}`});a.onload=()=>{e.drawImage(a,-s*b.value/2,-l*b.value/2,s*b.value,l*b.value),e.restore(),y.value=n.toDataURL()}}(p,new Image,c,m,g,s,t,l,f)}else!function(e,a,t,l,s,i,o,u,n,d,r){e.textBaseline="middle",e.textAlign="center",e.translate(t/2,t/2),e.rotate(Math.PI/180*s),e.font=`${u} normal ${n} ${i}px/${l}px ${o}`,e.fillStyle=d,e.fillText(a,0,0),e.restore(),y.value=r.toDataURL()}(p,r,t,l,s,i,o,u,n,d,f);else console.error("无法获取canvas上下文，请确认当前环境是否支持canvas")}(f,p,v,_,n,h,o,s,i,t,u,c,m,g)}(e,a,t,l,s,i,o,u,n,d,r,c,m,g)}return o((()=>{V()})),(e,a)=>{const t=p,l=v;return u(),n(l,{class:m(g(k)),style:r(g(I))},{default:d((()=>[!w.value&&$.value?(u(),n(t,{key:0,type:"2d",style:r({height:z.value+"px",width:x.value+"px",visibility:"hidden"}),"canvas-id":h.value,id:h.value},null,8,["style","canvas-id","id"])):c("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-023b014d"]]),R=P(e({__name:"Index",setup(e){const a=t(!1),l=i((()=>a.value?"https://wot-design-uni.cn/wot-design.png":""));function s(e){a.value=e}return(e,a)=>{const t=b(z("wd-watermark"),O),i=b(z("wd-button"),A),o=b(z("demo-block"),D),n=b(z("wd-badge"),G),r=b(z("wd-cell"),W),c=b(z("wd-cell-group"),H),m=b(z("page-wraper"),Y),f=v;return u(),_(w,null,[h(t,{image:g(l),width:130,height:140,"image-width":38,content:"wot-design-uni","image-height":38,opacity:.5},null,8,["image","opacity"]),h(f,null,{default:d((()=>[h(m,null,{default:d((()=>[h(o,{title:"基础用法"},{default:d((()=>[h(i,{onClick:a[0]||(a[0]=e=>s(!1)),plain:""},{default:d((()=>[y("文字水印")])),_:1}),h(i,{onClick:a[1]||(a[1]=e=>s(!0)),plain:""},{default:d((()=>[y("图片水印")])),_:1})])),_:1}),h(o,{title:"展示效果"},{default:d((()=>[h(n,{"custom-class":"badge",modelValue:200,max:99},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("评论")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:200,max:10},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1})])),_:1}),h(o,{title:"局部水印"},{default:d((()=>[h(t,{opacity:.8,image:"https://wot-design-uni.cn/wot-design.png","image-width":38,"image-height":38,"full-screen":!1},null,8,["opacity"]),h(n,{"custom-class":"badge",modelValue:12},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("评论")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:3,"bg-color":"pink"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:1,type:"primary"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("评论")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:2,type:"warning"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:1,type:"success"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("评论")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:2,type:"info"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1}),h(c,{border:""},{default:d((()=>[h(r,{size:"large",title:"标题文字",value:"内容"}),h(r,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),h(r,{size:"large",title:"标题文字",label:"描述信息",value:"内容"}),h(r,{size:"large",title:"标题文字",value:"内容"}),h(r,{title:"标题文字",value:"内容",size:"large",icon:"setting","is-link":""}),h(r,{size:"large",title:"标题文字",label:"描述信息",value:"内容"})])),_:1})])),_:1}),h(o,{title:"展示效果"},{default:d((()=>[h(n,{"custom-class":"badge",modelValue:"new"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("评论")])),_:1})])),_:1}),h(n,{"custom-class":"badge",modelValue:"hot"},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1})])),_:1}),h(o,{title:"展示效果"},{default:d((()=>[h(n,{"custom-class":"badge","is-dot":""},{default:d((()=>[y("数据查询")])),_:1}),h(n,{"custom-class":"badge","is-dot":""},{default:d((()=>[h(i,{round:!1,type:"info",size:"small"},{default:d((()=>[y("回复")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-4dfb452a"]]);export{R as default};
