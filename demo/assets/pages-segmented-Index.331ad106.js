import{g as e,x as a,l as s,i as t,s as l,H as i,v as o,p as n,b as u,e as d,a as r}from"./page-wraper.87c317ef.js";import{d as p,T as v,r as c,q as m,v as f,m as b,o as _,c as g,w as h,e as w,F as y,f as x,n as k,u as j,a as $,x as z,b as C,t as U,y as I,al as N,J as S,i as q,h as H,j as T,l as A}from"./index-3ce4de40.js";import{_ as F}from"./demo-block.0ea55f3c.js";const G=u(p({name:"wd-segmented",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,value:a([String,Number]),disabled:s(!1),size:t("middle"),options:{type:Array,required:!0,default:()=>[]},vibrateShort:s(!1)},emits:["update:value","change","click"],setup(e,{emit:a}){const s=e,t=".wd-segmented__item",u=v({width:0,height:0}),d=c(0),r=c(""),p=m((()=>s.disabled||!(!s.options[0]||!l(s.options[0]))&&s.options[0].disabled));f((()=>s.value),(()=>{A(),T(),s.vibrateShort&&N({})}),{immediate:!1});const{proxy:H}=S();function T(){i(t,!0,H).then((e=>{const a=e[d.value];let s=e.slice(0,d.value).reduce(((e,a)=>e+Number(a.width)),0);s+=(Number(a.width)-u.width)/2;const t={position:"absolute",width:o(u.width),transition:"all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1)",transform:`translateX(${s}px)`,"z-index":0};r.value!==n(t)&&(r.value=n(t))}))}function A(){const e=s.options.findIndex((e=>(l(e)?e.value:e)==s.value));if(e>=0)d.value=e;else{const e=l(s.options[0])?s.options[0].value:s.options[0];a("update:value",e),a("change",l(s.options[0])?s.options[0]:{value:e})}}return b((()=>{i(".wd-segmented__item",!1,H).then((e=>{e&&(u.height=Number(e.height),u.width=Number(e.width),A(),T())}))})),(e,t)=>{const i=q;return _(),g(i,{class:k(`wd-segmented ${e.customClass}`),style:I(e.customStyle)},{default:h((()=>[(_(!0),w(y,null,x(e.options,((t,o)=>(_(),g(i,{class:k(`wd-segmented__item is-${e.size} ${d.value===o?"is-active":""} ${e.disabled||j(l)(t)&&t.disabled?"is-disabled":""}`),onClick:e=>function(e,t){if(s.disabled||l(e)&&e.disabled)return;const i=l(e)?e.value:e;d.value=t,T(),a("update:value",i),a("change",l(e)?e:{value:i}),a("click",l(e)?e:{value:i})}(t,o),key:o},{default:h((()=>[$(i,{class:"wd-segmented__item-label"},{default:h((()=>[e.$slots.label?z(e.$slots,"label",{key:0,option:j(l)(t)?t:{value:t}},void 0,!0):(_(),w(y,{key:1},[C(U(j(l)(t)?t.value:t),1)],64))])),_:2},1024)])),_:2},1032,["class","onClick"])))),128)),$(i,{class:k("wd-segmented__item--active "+(j(p)?"is-disabled":"")),style:I(r.value)},null,8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-94f5d317"]]),J=u(p({__name:"Index",setup(e){const a=c(["评论","点赞","贡献","打赏"]),s=c([{value:"李雷",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/redpanda.jpg"}},{value:"韩梅梅",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/capybara.jpg"}},{value:"林涛",disabled:!0,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/panda.jpg"}},{value:"Tom",disabled:!1,payload:{avatar:"https://registry.npmmirror.com/wot-design-uni-assets/*/files/meng.jpg"}}]),t=c("简介"),l=c("详情"),i=c("评论"),o=c("打赏"),n=c("韩梅梅"),u=c("评论");function p(e){console.log(e)}return(e,v)=>{const c=H(T("wd-toast"),d),m=H(T("wd-segmented"),G),f=q,b=H(T("demo-block"),F),w=A,y=H(T("page-wraper"),r);return _(),g(f,null,{default:h((()=>[$(c),$(y,null,{default:h((()=>[$(b,{title:"大型分段器",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:a.value,value:t.value,"onUpdate:value":v[0]||(v[0]=e=>t.value=e),size:"large",onChange:p},null,8,["options","value"])])),_:1})])),_:1}),$(b,{title:"默认分段器",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:a.value,value:l.value,"onUpdate:value":v[1]||(v[1]=e=>l.value=e)},null,8,["options","value"])])),_:1})])),_:1}),$(b,{title:"小型分段器",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:a.value,value:i.value,"onUpdate:value":v[2]||(v[2]=e=>i.value=e),size:"small"},null,8,["options","value"])])),_:1})])),_:1}),$(b,{title:"带振动效果的分段器",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:a.value,value:o.value,"onUpdate:value":v[3]||(v[3]=e=>o.value=e),"vibrate-short":!0},null,8,["options","value"])])),_:1})])),_:1}),$(b,{title:"禁用分段器",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:a.value,value:u.value,"onUpdate:value":v[4]||(v[4]=e=>u.value=e),disabled:""},null,8,["options","value"])])),_:1})])),_:1}),$(b,{title:"自定义渲染分段器标签",transparent:""},{default:h((()=>[$(f,{class:"section"},{default:h((()=>[$(m,{options:s.value,value:n.value,"onUpdate:value":v[5]||(v[5]=e=>n.value=e),"vibrate-short":!0,onChange:p},{label:h((({option:e})=>[$(f,{class:"section-slot"},{default:h((()=>[$(w,{style:{"border-radius":"50%",width:"32px",height:"32px"},src:e.payload.avatar},null,8,["src"]),$(f,{class:"name"},{default:h((()=>[C(U(e.value),1)])),_:2},1024)])),_:2},1024)])),_:1},8,["options","value"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-1ca24240"]]);export{J as default};
