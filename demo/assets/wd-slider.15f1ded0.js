import{d as e,r as a,v as l,q as u,m as s,o as t,c as d,w as n,n as i,b as o,t as r,p as v,a as c,y as m,u as w,J as b,i as h}from"./index-3ce4de40.js";import{g as f,i as _,l as p,m as g,G as y,H as M,r as x,I as V,t as $,b as C}from"./page-wraper.87c317ef.js";import{u as T}from"./useTouch.0c8202f8.js";const k=C(e({name:"wd-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...f,customMinClass:_(""),customMaxClass:_(""),hideMinMax:p(!1),hideLabel:p(!1),disabled:p(!1),inactiveColor:_("#e5e5e5"),activeColor:_(""),max:g(100),min:g(0),step:g(1),modelValue:{type:[Number,Array],default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:f,emit:_}){const p=e,g={startValue:0,deltaX:0,newValue:0},C=a(`sliderId${y()}`),k=T(),I=T(),L=a(!1),N=a(""),S=a(0),j=a(0),X=a(0),G=a(0),H=a(0),q=a(0),A=a(0),E=a(0),J=a(0),O=a(100),z=a(0),B=a(1);l((()=>p.max),(e=>{e<=p.min?(O.value=p.min,z.value=e,console.warn("[wot design] warning(wd-slider): max value must be greater than min value")):O.value=e,ie()}),{immediate:!0}),l((()=>p.min),(e=>{e>=p.max?(z.value=p.max,O.value=e,console.warn("[wot design] warning(wd-slider): min value must be less than max value")):z.value=e,ie()}),{immediate:!0}),l((()=>p.step),(e=>{e<1?(B.value=1,console.warn("[wot design] warning(wd-slider): step must be greater than 0")):B.value=Math.floor(e)}),{immediate:!0}),l((()=>p.modelValue),(e=>{if(null==e?(_("update:modelValue",E.value),console.warn("[wot design] warning(wd-slider): value can nott be null or undefined")):x(e)&&2!==e.length?console.warn("[wot design] warning(wd-slider): value must be dyadic array"):V(e)||x(e)||(_("update:modelValue",E.value),console.warn("[wot design] warning(wd-slider): value must be dyadic array Or Number")),x(e)){if(E.value&&x(E.value)&&function(e,a){if(!$(e)||!$(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,E.value))return;E.value=e,L.value=!0,G.value<=X.value?(se(e[0]),ue(e[1])):(se(e[1]),ue(e[0]))}else{if(e===E.value)return;E.value=e,se(e)}}),{deep:!0,immediate:!0});const{proxy:D}=b(),F=u((()=>`wd-slider ${p.hideLabel?"":"wd-slider__has-label"} ${p.disabled?"wd-slider--disabled":""} ${p.customClass}`)),K=u((()=>""+(p.inactiveColor?"background:"+p.inactiveColor:""))),P=u((()=>`${N.value};${p.activeColor?"background:"+p.activeColor:""}`)),Q=u((()=>`left: ${G.value}%; visibility: ${p.disabled?"hidden":"show"};`)),R=u((()=>`left: ${X.value}%; visibility: ${p.disabled?"hidden":"show"}`));function U(){M(`#${C.value}`,!1,D).then((e=>{H.value=Number(e.width),q.value=Number(e.left)}))}function W(e){const{disabled:a,modelValue:l}=p;a||(k.touchStart(e),A.value=x(l)?G.value<X.value?de(l[0]):de(l[1]):de(l),_("dragstart",{value:E.value}))}function Y(e){const{disabled:a}=p;if(a)return;k.touchMove(e);const l=k.deltaX.value/H.value*(O.value-z.value);J.value=A.value+l,se(J.value),_("dragmove",{value:E.value})}function Z(){p.disabled||_("dragend",{value:E.value})}function ee(e){if(p.disabled)return;const{modelValue:a}=p;I.touchStart(e),g.startValue=G.value<X.value?de(a[1]):de(a[0]),_("dragstart",{value:E.value})}function ae(e){if(p.disabled)return;I.touchMove(e);const a=I.deltaX.value/H.value*(O.value-z.value);g.newValue=de(g.startValue+a),ue(g.newValue),_("dragmove",{value:E.value})}function le(){p.disabled||_("dragend",{value:E.value})}function ue(e){e=de(e),j.value=e,_("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),X.value=ne(e),te()}function se(e){const a=ne(e=de(e));L.value?(S.value=e,G.value=a,_("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),te()):(_("update:modelValue",e),S.value=e,G.value=a,N.value=`width: ${a}%; `)}function te(){const e=G.value<X.value?[G.value,X.value]:[X.value,G.value],a=`width: ${e[1]-e[0]}%;  left: ${e[0]}%`;E.value=S.value<j.value?[S.value,j.value]:[j.value,S.value],N.value=a}function de(e){return Math.round(Math.max(z.value,Math.min(e,O.value))/B.value)*B.value}function ne(e){return(e-z.value)/(O.value-z.value)*100}function ie(){const{modelValue:e}=p;let a=x(e)?G.value<X.value?de(e[0]):de(e[1]):de(e);a=de(a);const l=ne(a);G.value=l,N.value=`width: ${l}%; `}return s((()=>{U()})),f({initSlider:U}),(e,a)=>{const l=h;return t(),d(l,{class:i(w(F)),style:m(e.customStyle),id:C.value},{default:n((()=>[e.hideMinMax?v("",!0):(t(),d(l,{key:0,class:i(`wd-slider__label-min ${e.customMinClass}`)},{default:n((()=>[o(r(z.value),1)])),_:1},8,["class"])),c(l,{class:"wd-slider__bar-wrapper",style:m(w(K))},{default:n((()=>[c(l,{class:"wd-slider__bar",style:m(w(P))},null,8,["style"]),c(l,{class:"wd-slider__button-wrapper",style:m(w(Q)),onTouchstart:W,onTouchmove:Y,onTouchend:Z,onTouchcancel:Z},{default:n((()=>[e.hideLabel?v("",!0):(t(),d(l,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(S.value),1)])),_:1})),c(l,{class:"wd-slider__button"})])),_:1},8,["style"]),L.value?(t(),d(l,{key:0,class:"wd-slider__button-wrapper",style:m(w(R)),onTouchstart:ee,onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:n((()=>[e.hideLabel?v("",!0):(t(),d(l,{key:0,class:"wd-slider__label"},{default:n((()=>[o(r(j.value),1)])),_:1})),c(l,{class:"wd-slider__button"})])),_:1},8,["style"])):v("",!0)])),_:1},8,["style"]),e.hideMinMax?v("",!0):(t(),d(l,{key:1,class:i(`wd-slider__label-max ${e.customMaxClass}`)},{default:n((()=>[o(r(O.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style","id"])}}}),[["__scopeId","data-v-0d14edbe"]]);export{k as _};
