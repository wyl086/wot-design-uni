import{u as e,_ as l}from"./wd-message-box.c952f253.js";import{d as a,r as t,q as o,v as s,Q as u,E as c,m as r,O as i,o as d,c as n,w as m,a as v,u as p,y as f,x as V,b as h,t as _,n as w,I as y,G as k,i as x,g as b,J as g,h as j,j as C}from"./index-3ce4de40.js";import{g as S,m as F,i as z,l as I,G as L,v as U,p as M,s as P,b as G,a as T}from"./page-wraper.87c317ef.js";import{_ as E}from"./demo-block.0ea55f3c.js";import{_ as O}from"./wd-button.93e2fc0b.js";import"./wd-input.d39236fe.js";import"./useTranslate.26b7af52.js";const W=G(a({name:"wd-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...S,modelValue:F(0),size:F(100),color:{type:[String,Object],default:"#4d80f0"},layerColor:z("#EBEEF5"),fill:String,speed:F(50),text:String,strokeWidth:F(10),strokeLinecap:z("round"),clockwise:I(!0)},setup(e){const l=e;const a=2*Math.PI,j=-Math.PI/2,C=1,S=t(""),F=t(0),z=t(null),I=t(1),G=t(`wd-circle${L()}`);let T=null;const E=o((()=>l.size)),O=o((()=>l.strokeWidth)),W=o((()=>{const e={width:U(l.size),height:U(l.size)};return`${M(e)};`}));s((()=>l.modelValue),(()=>{!function(){if(l.speed<=0||l.speed>1e3)return void R(l.modelValue);q(),F.value=F.value||0;const e=()=>{z.value=setTimeout((()=>{F.value!==l.modelValue?(Math.abs(F.value-l.modelValue)<C?F.value=l.modelValue:F.value<l.modelValue?F.value+=C:F.value-=C,R(F.value),e()):q()}),1e3/l.speed)};e()}()}),{immediate:!0}),s((()=>l.size),(()=>{let e=setTimeout((()=>{R(F.value),clearTimeout(e)}),50)}),{immediate:!1}),s((()=>l.color),(()=>{R(F.value)}),{immediate:!1,deep:!0}),u((()=>{I.value=c().pixelRatio})),r((()=>{F.value=l.modelValue,R(F.value)})),i((()=>{q()}));const{proxy:$}=g();function B(e,a,t,o,s){let u=O.value;const c=E.value/2;s||(u/=2);const r=c-u/2;e.strokeStyle=a,e.setStrokeStyle(a),e.setLineWidth(u),e.setLineCap(l.strokeLinecap),e.beginPath(),e.arc(c,c,r,t,o,!l.clockwise),e.stroke(),s&&(e.setLineWidth(u),e.setFillStyle(s),e.fill())}function R(e){new Promise((e=>{if(T)return e(T);T=y(G.value,$),e(T)})).then((t=>{t.clearRect(0,0,E.value,E.value),function(e){B(e,l.layerColor,0,a,l.fill)}(t);const o=(s=e,Math.min(Math.max(s,0),100));var s;0!==o?function(e,t){const o=a*(t/100),s=l.clockwise?j+o:3*Math.PI-(j+o);if(P(l.color)){const a=e.createLinearGradient(E.value,0,0,0);Object.keys(l.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>a.addColorStop(parseFloat(e)/100,l.color[e]))),S.value=a}else S.value=l.color;B(e,S.value,j,s)}(t,o):function(e){const t=O.value,o=E.value/2;if(P(l.color)){const a=e.createLinearGradient(E.value,0,0,0);Object.keys(l.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>a.addColorStop(parseFloat(e)/100,l.color[e]))),S.value=a}else S.value=l.color;e.beginPath(),e.arc(o,t/4,t/4,0,a),e.setFillStyle(S.value),e.fill()}(t),t.draw()}))}function q(){z.value&&clearTimeout(z.value)}return(e,l)=>{const a=k,t=x,o=b;return d(),n(t,{class:w(`wd-circle ${e.customClass}`),style:f(e.customStyle)},{default:m((()=>[v(a,{width:p(E),height:p(E),style:f(p(W)),id:G.value,"canvas-id":G.value},null,8,["width","height","style","id","canvas-id"]),e.text?(d(),n(o,{key:1,class:"wd-circle__text"},{default:m((()=>[h(_(e.text),1)])),_:1})):(d(),n(t,{key:0,class:"wd-circle__text"},{default:m((()=>[V(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ec05c811"]]),$=G(a({__name:"Index",setup(a){const o=t(20),s={0:"red",100:"white"};function u(){o.value<100&&(o.value+=10)}function c(){o.value>0&&(o.value-=10)}const r=e();function i(){r.alert("操作成功")}return(e,a)=>{const t=j(C("wd-message-box"),l),r=j(C("wd-circle"),W),p=j(C("demo-block"),E),f=x,V=j(C("wd-button"),O),w=j(C("page-wraper"),T);return d(),n(f,{class:"circle"},{default:m((()=>[v(w,null,{default:m((()=>[v(t),v(p,{title:"基础用法"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),text:o.value+"%"},null,8,["modelValue","text"])])),_:1}),v(p,{title:"样式定制"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),"stroke-width":6,text:"宽度定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value=e),"layer-color":"#eee",color:"#ee0a24",text:"颜色定制"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value=e),color:s,text:"渐变色"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=e=>o.value=e),color:"#07c160",clockwise:!1,text:"逆时针"},null,8,["modelValue"]),v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value=e),size:120,text:"大小定制"},null,8,["modelValue"])])),_:1}),v(p,{title:"使用slot"},{default:m((()=>[v(r,{"custom-class":"custom-circle",modelValue:o.value,"onUpdate:modelValue":a[6]||(a[6]=e=>o.value=e),"stroke-width":6},{default:m((()=>[v(f,{style:{color:"red"}},{default:m((()=>[h(_(o.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1}),v(p,null,{default:m((()=>[v(V,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:u},{default:m((()=>[h("增加")])),_:1}),v(V,{type:"error",size:"small",onClick:c},{default:m((()=>[h("减少")])),_:1})])),_:1}),v(p,{title:"alert"},{default:m((()=>[v(V,{onClick:i},{default:m((()=>[h("alert")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-7da3dbac"]]);export{$ as default};
